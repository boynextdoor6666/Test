# Интеграция с API и решение проблем с Google Auth

## Проблема с Google Auth 404

Вы столкнулись с ошибкой:
```
POST http://localhost:3001/API/auth/google/verify 404 (Not Found)
```

Это означает, что бэкенд-сервер не имеет необходимого эндпоинта для верификации Google токенов.

## Решения

У вас есть несколько вариантов решения этой проблемы:

### 1. Добавить необходимый эндпоинт на бэкенд-сервер

Рекомендуется реализовать полноценную интеграцию с Google Auth на вашем сервере. Инструкции и пример кода находятся в файле `BACKEND-GOOGLE-AUTH.md`.

### 2. Использовать демо-режим только для Google Auth

Мы внесли изменения в код фронтенда, который теперь автоматически обнаруживает отсутствие эндпоинта Google Auth и переключается в демо-режим **только для Google авторизации**, не влияя на остальные функции API. 

Это поведение включено по умолчанию и не требует дополнительной настройки.

### 3. Использовать переменную окружения для управления режимом API

Вы можете добавить дополнительную переменную окружения в файл `.env`:

```
VITE_FORCE_DEMO_GOOGLE_AUTH=true
```

Это заставит приложение всегда использовать демо-режим для Google авторизации, даже если API сервер доступен.

## Проверка статуса API

Теперь приложение выполняет более умную проверку доступности API:

1. В режиме разработки (DEV):
   - Проверяет наличие эндпоинта `/auth/google/verify`
   - Если эндпоинт отсутствует, использует демо-режим для Google Auth
   - Остальные функции API продолжают работать нормально

2. В продакшн-режиме:
   - Полная проверка доступности API через `/health`
   - Автоматическое переключение в оффлайн-режим при недоступности API

## Диагностика

Вы можете проверить консоль браузера для получения подробной информации о состоянии API и режиме работы приложения:

```javascript
// Проверка текущего режима
import { isOfflineMode } from '@/utils/api';
console.log('Offline mode:', isOfflineMode());

// Принудительное включение онлайн-режима
import { forceOnlineMode } from '@/utils/api';
forceOnlineMode();

// Проверка доступности API
import { checkApiHealth } from '@/utils/api';
checkApiHealth().then(isHealthy => console.log('API healthy:', isHealthy));
``` 